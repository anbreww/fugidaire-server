
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Taplist</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="bower_components/nativeDroid2/css/<nativedroid2" charset="utf-8">
  </head>
  <body style="height: 600px; width: 100%">



    <div id="all" class="color">Main</div>
    <div id="taps" class="color">Taps</div>
    <div id="shelves" class="color">Shelves</div>

    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" scr="bower_components/nativeDroid2/js/nativedroid2.js"> </script>
    <script type="text/javascript" src="jqColorPicker.min.js"></script>
    <script type="text/javascript" src="underscore-min.js"></script>

    <script type="text/javascript">
        updater = _.throttle(function(id, color, override) {
          color = "#"+color
          console.log(id + ': '+color)
          $.ajax({
            url:'/api/v1/'+id,
            type:'PUT',
            data:{'color':color},
          });
        }, 500);
        $('.color').colorPicker({
          buildCallback: function($elm) {
              $elm.prepend('<div class="cp-color-picker"></div>');
          },
          cssAddon: '.cp-disp{padding:10px; margin-bottom:6px; font-size:19px; height:20px; line-height:20px}' +
          '.cp-xy-slider{width:200px; height:200px;}' +
'.cp-xy-cursor{width:16px; height:16px; border-width:2px; margin:-8px}' +
              			'.cp-z-slider{height:200px; width:40px;}' +
              			'.cp-z-cursor{border-width:8px; margin-top:-8px;}' +
              			'.cp-alpha{height:40px;}' +
              			'.cp-alpha-cursor{border-width: 8px; margin-left:-8px;}',
          opacity: false,
          doRender: 'div div',
          preventFocus: true,
          renderCallback: function($elm, toggled) {
            var colors = this.color.colors,
            rgb = colors.RND.rgb;
            updater($elm.attr('id'), colors.HEX, false);

            if (toggled === true) {
      				// here you can recalculate position after showing the color picker
      				// in case it doesn't fit into view.
      				$('.trigger').removeClass('active');
      				$elm.closest('.trigger').addClass('active');
      			} else if (toggled === false) {
              // this happens when the box just disappeared
      				$elm.closest('.trigger').removeClass('active');
      			}

            $('.cp-disp').css({
                backgroundColor: '#' + colors.HEX,
                color: colors.RGBLuminance > 0.22 ? '#222' : '#ddd'
            }).text('rgba(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b +
                ', ' + (Math.round(colors.alpha * 100) / 100) + ')');
            },
        }); // that's it
    </script>
  </body>
</html>
